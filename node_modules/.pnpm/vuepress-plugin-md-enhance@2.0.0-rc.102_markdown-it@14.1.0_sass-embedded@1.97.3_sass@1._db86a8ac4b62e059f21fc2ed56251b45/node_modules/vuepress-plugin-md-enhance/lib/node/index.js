import{encodeData as h,entries as v,Logger as oe,ensureEndingSlash as te,isModuleAvailable as se,isDef as ae,isPlainObject as w,keys as C,endsWith as _,deepAssign as A,fromEntries as j,addViteSsrNoExternal as re,addViteOptimizeDepsInclude as O,addViteOptimizeDepsNeedsInterop as ie,addViteSsrExternal as I,chainWebpack as le}from"@vuepress/helper";import{useSassPalettePlugin as pe}from"@vuepress/plugin-sass-palette";import{hash as me,colors as S,path as ue,getDirname as ce}from"vuepress/utils";import{createConverter as de}from"vuepress-shared/node";import{container as E}from"@mdit/plugin-container";import{demo as ge}from"@mdit/plugin-demo";const U={useBabel:!1,jsLib:[],cssLib:[],codepenLayout:"left",codepenEditors:"101",babel:"https://unpkg.com/@babel/standalone/babel.min.js",vue:"https://unpkg.com/vue/dist/vue.global.prod.js",react:"https://unpkg.com/react/umd/react.production.min.js",reactDOM:"https://unpkg.com/react-dom/umd/react-dom.production.min.js"},D=n=>e=>{E(e,{name:n,openRender:(t,r)=>{const s=t[r].info.trimStart().slice(n.length).trim();let o="";const a={};for(let i=r;i<t.length;i++){const{type:p,content:f,info:g}=t[i],d=g?/^([^ :[{]+)/.exec(e.utils.unescapeAll(g).trim())?.[1]??"text":"";if(p===`container_${n}_close`)break;f&&p==="fence"&&(d==="json"?o=h(f):a[d]=f)}return`<CodeDemo id="code-demo-${r}" type="${n.split("-")[0]}"${s?` title="${encodeURIComponent(s)}"`:""}${o?` config="${o}"`:""} code="${h(JSON.stringify(a))}">
`},closeRender:()=>`</CodeDemo>
`})},N=D("normal-demo"),T=D("vue-demo"),z=D("react-demo"),M=n=>n.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;"),J="@",ye=["file","import","setting"],fe=n=>(e,t,r,s)=>{let o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.src[o]!==":")return!1;let i=o+1;for(;i<=a&&e.src[i]===":";)i+=1;const p=i-o;if(p<3)return!1;const f=e.src.slice(o,i),g=e.src.slice(i,a),[d]=g.trimStart().split(" ",2),y=g.trimStart().slice(n.length).trim();if(d.trim()!==n)return!1;if(s)return!0;let u=t,m=!1;for(;u<r&&(u+=1,o=e.bMarks[u]+e.tShift[u],a=e.eMarks[u],!(o<a&&e.sCount[u]<e.blkIndent));)if(e.src[o]===":"&&e.sCount[u]-e.blkIndent<4){for(i=o+1;i<=a&&e.src[i]===":";i++);if(i-o>=p&&(i=e.skipSpaces(i),i>=a)){m=!0;break}}const l=e.parentType,c=e.lineMax;e.parentType=n,e.lineMax=u-(m?1:0);const k=e.push(`${n}_open`,"template",1);k.markup=f,k.block=!0,k.info=y,k.map=[t,u-(m?1:0)],e.md.block.tokenize(e,t+1,u-(m?1:0));const b=e.push(`${n}_close`,"template",-1);return b.markup=e.src.slice(o,i),b.block=!0,e.parentType=l,e.lineMax=c,e.line=u+(m?1:0),!0},ke=n=>(e,t,r,s)=>{let o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];const i=`${J}${n}`;if(e.src.charAt(o)!=="@")return!1;let p=0;for(;p<i.length;){if(i[p]!==e.src[o+p])return!1;p++}const f=e.src.slice(o,o+p),g=e.src.slice(o+p,a);if(s)return!0;let d=t,y=!1;for(;d<r&&(d+=1,o=e.bMarks[d]+e.tShift[d],a=e.eMarks[d],!(o<a&&e.sCount[d]<e.blkIndent));)if(e.src[o]===J&&e.sCount[d]<=e.sCount[t]){let k=!0;for(p=0;p<i.length;p++)if(i[p]!==e.src[o+p]){k=!1;break}if(k){y=!0,d-=1;break}}const u=e.parentType,m=e.lineMax;e.parentType=n,e.lineMax=d;const l=e.push(`${n}_open`,"template",1);l.block=!0,l.markup=f,l.info=g.trim(),l.map=[t,d],e.md.block.tokenize(e,t+1,d);const c=e.push(`${n}_close`,"template",-1);return c.block=!0,c.markup="",e.parentType=u,e.lineMax=m,e.line=d+(y?1:0),!0},be=n=>({key:n.key,title:n.title??"",files:encodeURIComponent(JSON.stringify(n.files)),settings:encodeURIComponent(JSON.stringify(n.settings))}),$=(n,e)=>{const{name:t="playground",component:r="Playground",propsGetter:s=be}=e??{};n.block.ruler.before("fence",t,fe(t),{alt:["paragraph","reference","blockquote","list"]}),ye.forEach(o=>{n.block.ruler.__rules__.some(({name:a})=>a===`at-${o}`)||n.block.ruler.before("fence",`at-${o}`,ke(o),{alt:["paragraph","reference","blockquote","list"]})}),n.renderer.rules[`${t}_open`]=(o,a)=>{const{info:i}=o[a],p={key:me(`playground${a}-${i}`),title:encodeURIComponent(i),settings:{},files:{}};let f=null,g=!1;for(let y=a;y<o.length;y++){const{block:u,type:m,info:l,content:c}=o[y];if(u){if(m===`${t}_close`)break;if(m===`${t}_open`)continue;if(m==="file_open"){if(!l)continue;f=l}else if(m==="import_open")f=l||"import-map.json",p.importMap=f;else if(m==="setting_open")g=!0;else if(m==="file_close"||m==="import_close"||m==="setting_close"||!c){o[y].type=`${t}_empty`,o[y].hidden=!0,m==="setting_close"&&(g=!1);continue}g?m==="fence"&&l==="json"&&(p.settings=JSON.parse(c.trim())):m==="fence"&&f&&(p.files[f]={ext:l,content:c}),o[y].type=`${t}_empty`,o[y].hidden=!0}}const d=s(p);return`<${r} ${v(d).map(([y,u])=>`${y}="${M(u)}"`).join(" ")}>
`},n.renderer.rules[`${t}_close`]=()=>`</${r}>
`},he="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",ve=(n,e,t)=>{let r,s,o,a={},i={},p="",f="",g="",d=2,y=3,u=2,m=[],l=0,c=0;for(o=0;o<n.length;o+=1)if(p=n.charAt(o),Object.prototype.hasOwnProperty.call(a,p)||(a[p]=y++,i[p]=!0),f=g+p,Object.prototype.hasOwnProperty.call(a,f))g=f;else{if(Object.prototype.hasOwnProperty.call(i,g)){if(g.charCodeAt(0)<256){for(r=0;r<u;r++)l<<=1,c==e-1?(c=0,m.push(t(l)),l=0):c++;for(s=g.charCodeAt(0),r=0;r<8;r++)l=l<<1|1&s,c==e-1?(c=0,m.push(t(l)),l=0):c++,s>>=1}else{for(s=1,r=0;r<u;r++)l=l<<1|s,c==e-1?(c=0,m.push(t(l)),l=0):c++,s=0;for(s=f.charCodeAt(0),r=0;r<16;r++)l=l<<1|1&s,c==e-1?(c=0,m.push(t(l)),l=0):c++,s>>=1}--d==0&&(d=Math.pow(2,u),u++),delete i[g]}else for(s=a[g],r=0;r<u;r++)l=l<<1|1&s,c==e-1?(c=0,m.push(t(l)),l=0):c++,s>>=1;--d==0&&(d=Math.pow(2,u),u++),a[f]=y++,g=String(p)}if(g!==""){if(Object.prototype.hasOwnProperty.call(i,g)){if(g.charCodeAt(0)<256){for(r=0;r<u;r++)l<<=1,c==e-1?(c=0,m.push(t(l)),l=0):c++;for(s=g.charCodeAt(0),r=0;r<8;r++)l=l<<1|1&s,c==e-1?(c=0,m.push(t(l)),l=0):c++,s>>=1}else{for(s=1,r=0;r<u;r++)l=l<<1|s,c==e-1?(c=0,m.push(t(l)),l=0):c++,s=0;for(s=g.charCodeAt(0),r=0;r<16;r++)l=l<<1|1&s,c==e-1?(c=0,m.push(t(l)),l=0):c++,s>>=1}--d==0&&(d=Math.pow(2,u),u++),delete i[g]}else for(s=a[g],r=0;r<u;r++)l=l<<1|1&s,c==e-1?(c=0,m.push(t(l)),l=0):c++,s>>=1;--d==0&&(d=Math.pow(2,u),u++)}for(s=2,r=0;r<u;r++)l=l<<1|1&s,c==e-1?(c=0,m.push(t(l)),l=0):c++,s>>=1;for(;;){if(l<<=1,c==e-1){m.push(t(l));break}c++}return m.join("")},L=n=>ve(n,6,e=>he.charAt(e)),Pe=[{name:"help",type:"boolean"},{name:"help",type:"boolean"},{name:"watch",type:"boolean"},{name:"preserveWatchOutput",type:"boolean"},{name:"listFiles",type:"boolean"},{name:"explainFiles",type:"boolean"},{name:"listEmittedFiles",type:"boolean"},{name:"pretty",type:"boolean"},{name:"traceResolution",type:"boolean"},{name:"diagnostics",type:"boolean"},{name:"extendedDiagnostics",type:"boolean"},{name:"generateCpuProfile",type:"string"},{name:"generateTrace",type:"string"},{name:"incremental",type:"boolean"},{name:"declaration",type:"boolean"},{name:"declarationMap",type:"boolean"},{name:"emitDeclarationOnly",type:"boolean"},{name:"sourceMap",type:"boolean"},{name:"inlineSourceMap",type:"boolean"},{name:"noCheck",type:"boolean"},{name:"noEmit",type:"boolean"},{name:"assumeChangesOnlyAffectDirectDependencies",type:"boolean"},{name:"locale",type:"string"},{name:"all",type:"boolean"},{name:"version",type:"boolean"},{name:"init",type:"boolean"},{name:"project",type:"string"},{name:"showConfig",type:"boolean"},{name:"listFilesOnly",type:"boolean"},{name:"target",type:{es3:0,es5:1,es6:2,es2015:2,es2016:3,es2017:4,es2018:5,es2019:6,es2020:7,es2021:8,es2022:9,es2023:10,es2024:11,esnext:99}},{name:"module",type:{none:0,commonjs:1,amd:2,system:4,umd:3,es6:5,es2015:5,es2020:6,es2022:7,esnext:99,node16:100,node18:101,node20:102,nodenext:199,preserve:200}},{name:"lib",type:"list"},{name:"allowJs",type:"boolean"},{name:"checkJs",type:"boolean"},{name:"jsx",type:{preserve:1,"react-native":3,"react-jsx":4,"react-jsxdev":5,react:2}},{name:"outFile",type:"string"},{name:"outDir",type:"string"},{name:"rootDir",type:"string"},{name:"composite",type:"boolean"},{name:"tsBuildInfoFile",type:"string"},{name:"removeComments",type:"boolean"},{name:"importHelpers",type:"boolean"},{name:"importsNotUsedAsValues",type:{remove:0,preserve:1,error:2}},{name:"downlevelIteration",type:"boolean"},{name:"isolatedModules",type:"boolean"},{name:"verbatimModuleSyntax",type:"boolean"},{name:"isolatedDeclarations",type:"boolean"},{name:"erasableSyntaxOnly",type:"boolean"},{name:"libReplacement",type:"boolean"},{name:"strict",type:"boolean"},{name:"noImplicitAny",type:"boolean"},{name:"strictNullChecks",type:"boolean"},{name:"strictFunctionTypes",type:"boolean"},{name:"strictBindCallApply",type:"boolean"},{name:"strictPropertyInitialization",type:"boolean"},{name:"strictBuiltinIteratorReturn",type:"boolean"},{name:"noImplicitThis",type:"boolean"},{name:"useUnknownInCatchVariables",type:"boolean"},{name:"alwaysStrict",type:"boolean"},{name:"noUnusedLocals",type:"boolean"},{name:"noUnusedParameters",type:"boolean"},{name:"exactOptionalPropertyTypes",type:"boolean"},{name:"noImplicitReturns",type:"boolean"},{name:"noFallthroughCasesInSwitch",type:"boolean"},{name:"noUncheckedIndexedAccess",type:"boolean"},{name:"noImplicitOverride",type:"boolean"},{name:"noPropertyAccessFromIndexSignature",type:"boolean"},{name:"moduleResolution",type:{node10:2,node:2,classic:1,node16:3,nodenext:99,bundler:100}},{name:"baseUrl",type:"string"},{name:"paths",type:"object"},{name:"rootDirs",type:"list"},{name:"typeRoots",type:"list"},{name:"types",type:"list"},{name:"allowSyntheticDefaultImports",type:"boolean"},{name:"esModuleInterop",type:"boolean"},{name:"preserveSymlinks",type:"boolean"},{name:"allowUmdGlobalAccess",type:"boolean"},{name:"moduleSuffixes",type:"list"},{name:"allowImportingTsExtensions",type:"boolean"},{name:"rewriteRelativeImportExtensions",type:"boolean"},{name:"resolvePackageJsonExports",type:"boolean"},{name:"resolvePackageJsonImports",type:"boolean"},{name:"customConditions",type:"list"},{name:"noUncheckedSideEffectImports",type:"boolean"},{name:"sourceRoot",type:"string"},{name:"mapRoot",type:"string"},{name:"inlineSources",type:"boolean"},{name:"experimentalDecorators",type:"boolean"},{name:"emitDecoratorMetadata",type:"boolean"},{name:"jsxFactory",type:"string"},{name:"jsxFragmentFactory",type:"string"},{name:"jsxImportSource",type:"string"},{name:"resolveJsonModule",type:"boolean"},{name:"allowArbitraryExtensions",type:"boolean"},{name:"out",type:"string"},{name:"reactNamespace",type:"string"},{name:"skipDefaultLibCheck",type:"boolean"},{name:"charset",type:"string"},{name:"emitBOM",type:"boolean"},{name:"newLine",type:{crlf:0,lf:1}},{name:"noErrorTruncation",type:"boolean"},{name:"noLib",type:"boolean"},{name:"noResolve",type:"boolean"},{name:"stripInternal",type:"boolean"},{name:"disableSizeLimit",type:"boolean"},{name:"disableSourceOfProjectReferenceRedirect",type:"boolean"},{name:"disableSolutionSearching",type:"boolean"},{name:"disableReferencedProjectLoad",type:"boolean"},{name:"noImplicitUseStrict",type:"boolean"},{name:"noEmitHelpers",type:"boolean"},{name:"noEmitOnError",type:"boolean"},{name:"preserveConstEnums",type:"boolean"},{name:"declarationDir",type:"string"},{name:"skipLibCheck",type:"boolean"},{name:"allowUnusedLabels",type:"boolean"},{name:"allowUnreachableCode",type:"boolean"},{name:"suppressExcessPropertyErrors",type:"boolean"},{name:"suppressImplicitAnyIndexErrors",type:"boolean"},{name:"forceConsistentCasingInFileNames",type:"boolean"},{name:"maxNodeModuleJsDepth",type:"number"},{name:"noStrictGenericChecks",type:"boolean"},{name:"useDefineForClassFields",type:"boolean"},{name:"preserveValueImports",type:"boolean"},{name:"keyofStringsOnly",type:"boolean"},{name:"plugins",type:"list"},{name:"moduleDetection",type:{auto:2,legacy:1,force:3}},{name:"ignoreDeprecations",type:"string"}],$e=ce(import.meta.url),F="vuepress-plugin-md-enhance",P=new oe(F),x=te(ue.resolve($e,"../client")),we=(n,e=!0)=>{const t=se(n,import.meta);return e&&!t&&P.error(`Package ${S.cyan(n)} is not installed, please install it manually!`),t},V=(n,e={})=>{const t=`#code/${L(n)}`,r=v(e).map(([s,o])=>{const a=Pe.find(p=>p.name===s);if(!a||o===null||!ae(o))return"";const{type:i}=a;return w(i)?i[o]?.toString()??"":`${s}=${encodeURIComponent(o)}`}).filter(s=>s.length).join("&");return`${r?`?${r}`:""}${t}`},G=({service:n="https://www.typescriptlang.org/play",...e}={})=>({name:"playground#ts",propsGetter:({title:t="",files:r,settings:s})=>{const o=C(r).filter(i=>_(i,".ts"));o.length!==1&&P.error("TS playground only support 1 ts file");const a=`${n}${V(r[o[0]].content,A({},s,e))}`;return{title:t,link:encodeURIComponent(a)}}}),Se=new Set(["html","js","ts","vue","jsx","tsx","json"]),B="https://sfc.vuejs.org/vue.runtime.esm-browser.js",q="https://sfc.vuejs.org/server-renderer.esm-browser.js",K=(n={})=>({name:"playground#vue",propsGetter:e=>{const{title:t="",files:r,settings:s}=e,o={service:"https://sfc.vuejs.org/",dev:!1,ssr:!1,...n,...s},a=j(v(r).filter(([,{ext:i}])=>Se.has(i)).map(([i,{content:p}])=>{if(i==="import-map.json"){const f=JSON.parse(p);return[i,JSON.stringify(A({imports:{vue:B,...o.ssr?{"vue/server-renderer":q}:{}}},f),null,2)]}return[i,p]}));return o.ssr&&!a["import-map.json"]&&(a["import-map.json"]=JSON.stringify({imports:{vue:B,"vue/server-renderer":q}},null,2)),{title:t,link:encodeURIComponent(`${o.service}#${o.dev?"__DEV__":""}${o.ssr?"__SSR__":""}${Buffer.from(JSON.stringify(a)).toString("base64")}`)}}}),R=(n,e,t="&")=>e?`${t}${n}=${L(e)}`:"",W=(n,e,t,r)=>{const s=`/${R("html",e,"?")}${R("config",r)}${R("css",t)}`;return`${n}${s}`},H=({service:n="https://unocss.dev/play"}={})=>({name:"playground#unocss",propsGetter:({title:e="",files:t})=>{const r=C(t).filter(p=>_(p,".html")),s=C(t).filter(p=>_(p,".css")),o=C(t).filter(p=>_(p,".js")||_(p,".ts"));(r.length>1||s.length>1||o.length>1)&&P.error("UnoCSS playground only support 1 html/css/config file");const a=p=>p.length===1?t[p[0]].content:"",i=W(n,a(r),a(s),a(o));return{title:e,link:encodeURIComponent(i)}}}),Y=n=>{n.use($,{name:"kotlin-playground",component:"KotlinPlayground",propsGetter:({title:e="",key:t,files:r,settings:s})=>({title:e,key:t,settings:encodeURIComponent(JSON.stringify(s)),files:h(JSON.stringify(v(r).map(([,{content:o}])=>o)))})})},xe=new Set(["html","js","ts","vue","jsx","tsx","json"]),Ce=n=>Buffer.from(JSON.stringify(j(v(n).filter(([,{ext:e}])=>xe.has(e)).map(([e,{content:t}])=>[e,t])))).toString("base64"),Q=n=>{n.use($,{name:"vue-playground",component:"VuePlayground",propsGetter:({title:e="",key:t,files:r,settings:s})=>({title:e,key:t,settings:encodeURIComponent(JSON.stringify(s)),files:encodeURIComponent(Ce(r))})})},_e=n=>JSON.stringify(j(v(n).map(([e,t])=>[e,typeof t=="string"||t.active||t.hidden||t.readOnly?t:t.code]))),X=n=>{const e=/.*(?<!\\)\[([^}]*)\].*/.exec(n);if(e?.[1]){const t=e[1].split(" ");return j(t.filter(r=>r.trim().length>0).map(r=>{const[s,o]=r.trim().split("=",2);return[s,o]}))}return{}},Z="@",je=["file","options","setup"],Me=n=>({title:n.title??"",template:n.template??"",files:h(_e(n.files)),options:h(JSON.stringify(n.options??{})),customSetup:h(JSON.stringify(n.customSetup??{}))}),ee=n=>new Function(`return ${n};`)(),Oe=(n,e,t,r)=>{let s=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];if(n.src[s]!==":")return!1;let a=s+1;for(;a<=o&&n.src[a]===":";)a+=1;const i=a-s;if(i<3)return!1;const p=n.src.slice(s,a),f=n.src.slice(a,o).trim(),g=f.indexOf(" ");let d="",y="";if(g>0?(d=f.slice(0,g),y=f.slice(g+1).replaceAll(/(?<!\\)\[([^}]*)\]/g,"")):d=f,!d.startsWith("sandpack"))return!1;if(r)return!0;let u=e,m=!1;for(;u<t&&(u+=1,s=n.bMarks[u]+n.tShift[u],o=n.eMarks[u],!(s<o&&n.sCount[u]<n.blkIndent));)if(n.src[s]===":"&&n.sCount[u]-n.blkIndent<4){for(a=s+1;a<=o&&n.src[a]===":";a++);if(a-s>=i&&(a=n.skipSpaces(a),a>=o)){m=!0;break}}const l=n.parentType,c=n.lineMax;n.parentType="sandpack",n.lineMax=u-(m?1:0);const k=n.push("sandpack_open","template",1);k.markup=p,k.content=f,k.block=!0,k.info=y,k.map=[e,u-(m?1:0)],n.md.block.tokenize(n,e+1,u-(m?1:0));const b=n.push("sandpack_close","template",-1);return b.markup=n.src.slice(s,a),b.block=!0,n.parentType=l,n.lineMax=c,n.line=u+(m?1:0),!0},Ie=n=>(e,t,r,s)=>{let o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];const i=`${Z}${n}`;if(e.src.charAt(o)!=="@")return!1;let p=0;for(;p<i.length;){if(i[p]!==e.src[o+p])return!1;p++}const f=e.src.slice(o,o+p),g=e.src.slice(o+p,a);if(s)return!0;let d=t,y=!1;for(;d<r&&(d+=1,o=e.bMarks[d]+e.tShift[d],a=e.eMarks[d],!(o<a&&e.sCount[d]<e.blkIndent));)if(e.src[o]===Z&&e.sCount[d]<=e.sCount[t]){let k=!0;for(let b=0;b<i.length;b++)if(i[b]!==e.src[o+b]){k=!1;break}if(k){y=!0,d-=1;break}}const u=e.parentType,m=e.lineMax;e.parentType=n,e.lineMax=d;const l=e.push(`${n}_open`,"template",1);l.block=!0,l.markup=f,l.info=g.trim(),l.map=[t,d],e.md.block.tokenize(e,t+1,d);const c=e.push(`${n}_close`,"template",-1);return c.block=!0,c.markup="",e.parentType=u,e.lineMax=m,e.line=d+(y?1:0),!0},ne=n=>{n.block.ruler.before("fence","sandpack",Oe,{alt:["paragraph","reference","blockquote","list"]}),je.forEach(e=>{n.block.ruler.__rules__.some(({name:t})=>t===`at-${e}`)||n.block.ruler.before("fence",`at-${e}`,Ie(e),{alt:["paragraph","reference","blockquote","list"]})}),n.renderer.rules.sandpack_open=(e,t)=>{const{content:r,info:s}=e[t],o=X(r),a={title:encodeURIComponent(s),files:{},options:{},customSetup:{}},i=r.split(" ",2)[0].trim().split("#");i.length>1&&(a.template=i[1]);let p=null,f=!1,g=!1;for(let y=t;y<e.length;y++){const{block:u,type:m,info:l,content:c}=e[y];if(u){if(m==="sandpack_close")break;if(m==="sandpack_open")continue;if(m==="file_open"){if(!l)continue;[p]=l.trim().split(" ");const k=X(l);a.files[p]={code:"",active:"active"in k,hidden:"hidden"in k,readOnly:"readOnly"in k}}else(m==="file_close"||m==="setup_open"||m==="options_open")&&(p=null);if(m==="setup_open"?g=!0:m==="setup_close"?g=!1:m==="options_open"?f=!0:m==="options_close"&&(f=!1),m==="file_close"||m==="setup_close"||m==="options_close"||!c){e[y].type="sandpack_empty",e[y].hidden=!0;continue}f&&(m==="fence"&&(l==="js"||l==="javascript")&&(a.options=ee(c.trim())),f=!1),g&&(m==="fence"&&(l==="js"||l==="javascript")&&(a.customSetup=ee(c.trim())),g=!1),m==="fence"&&p&&(a.files[p].code=c),e[y].type="sandpack_empty",e[y].hidden=!0}}const d=Me(a);return`<SandPack ${C(o).length>0?`${v(o).map(([y,u])=>u?`${y}="${M(u)}"`:y).join(" ")} `:""}${v(d).map(([y,u])=>u?`${y}="${M(u)}"`:null).filter(Boolean).join(" ")}>
`},n.renderer.rules.sandpack_close=()=>`</SandPack>
`},De=n=>{const{droppedLogger:e}=de("md-enhance");e({options:n,old:"enableAll",msg:"Please manually enable the features you need."}),e({options:n,old:"imageFix",msg:"This option is no longer needed."}),e({options:n,old:"lineNumbers",msg:"Please use lineNumbers option in @vuepress/plugin-prismjs or @vuepress/plugin-shiki !"}),e({options:n,old:"alert",msg:"Please use alert option in @vuepress/plugin-markdown-hint instead."}),e({options:n,old:"container",msg:"Please use hint option in @vuepress/plugin-markdown-hint instead."}),e({options:n,old:"hint",msg:"Please use hint option in @vuepress/plugin-markdown-hint instead."}),e({options:n,old:"mdImport",msg:"Please use @vuepress/plugin-markdown-include instead."}),e({options:n,old:"include",msg:"Please use @vuepress/plugin-markdown-include instead."}),e({options:n,old:"imageTitle",msg:"Please use figure option in @vuepress/plugin-markdown-image instead."}),e({options:n,old:"figure",msg:"Please use figure option in @vuepress/plugin-markdown-image instead."}),e({options:n,old:"imageMark",msg:"Please use mark option in @vuepress/plugin-markdown-image instead."}),e({options:n,old:"imgMark",msg:"Please use mark option in @vuepress/plugin-markdown-image instead."}),e({options:n,old:"imgSize",msg:"Please use size option in @vuepress/plugin-markdown-image instead."}),e({options:n,old:"imageSize",msg:"Please use size option in @vuepress/plugin-markdown-image instead."}),e({options:n,old:"lazyload",msg:"Please use lazyload option in @vuepress/plugin-markdown-image instead."}),e({options:n,old:"imageLazyload",msg:"Please use lazyload option in @vuepress/plugin-markdown-image instead."}),e({options:n,old:"imgLazyload",msg:"Please use lazyload option in @vuepress/plugin-markdown-image instead."}),e({options:n,old:"obsidianImgSize",msg:"Please use obsidianSize option in @vuepress/plugin-markdown-image instead."}),e({options:n,old:"linkCheck",msg:"Please use @vuepress/plugin-links-check instead."}),e({options:n,old:"checkLinks",msg:"Please use @vuepress/plugin-links-check instead."}),e({options:n,old:"tex",msg:"Please use @vuepress/plugin-markdown-math instead."}),e({options:n,old:"katex",msg:"Please use @vuepress/plugin-markdown-math instead."}),e({options:n,old:"mathjax",msg:"Please use @vuepress/plugin-markdown-math instead."}),e({options:n,old:"revealjs",msg:"Please use @vuepress/plugin-revealjs instead."}),e({options:n,old:"revealJs",msg:"Please use @vuepress/plugin-revealjs instead."}),e({options:n,old:"presentation",msg:"Please use @vuepress/plugin-revealjs instead."}),e({options:n,old:"codegroup",msg:"Please use codeTabs option in @vuepress/plugin-markdown-tab instead."}),e({options:n,old:"codetabs",msg:"Please use codeTabs option in @vuepress/plugin-markdown-tab instead."}),e({options:n,old:"tabs",msg:"Please use tabs option in @vuepress/plugin-markdown-tab instead."}),e({options:n,old:"vpre",msg:"Please use vPre option in @vuepress/plugin-markdown-ext instead."}),e({options:n,old:"vPre",msg:"Please use vPre option in @vuepress/plugin-markdown-ext instead."}),e({options:n,old:"breaks",msg:"Please use breaks option in @vuepress/plugin-markdown-ext instead."}),e({options:n,old:"linkify",msg:"Please use linkify option in @vuepress/plugin-markdown-ext instead."}),e({options:n,old:"gfm",msg:"Please use gfm option in @vuepress/plugin-markdown-ext instead."}),e({options:n,old:"footnote",msg:"Please use footnote option in @vuepress/plugin-markdown-ext instead."}),e({options:n,old:"tasklist",msg:"Please use tasklist option in @vuepress/plugin-markdown-ext instead."}),e({options:n,old:"component",msg:"Please use component option in @vuepress/plugin-markdown-ext instead."}),e({options:n,old:"align",msg:"Please use align option in @vuepress/plugin-markdown-stylize instead."}),e({options:n,old:"attrs",msg:"Please use attrs option in @vuepress/plugin-markdown-stylize instead."}),e({options:n,old:"mark",msg:"Please use mark option in @vuepress/plugin-markdown-stylize instead."}),e({options:n,old:"spoiler",msg:"Please use spoiler option in @vuepress/plugin-markdown-stylize instead."}),e({options:n,old:"sub",msg:"Please use sub option in @vuepress/plugin-markdown-stylize instead."}),e({options:n,old:"sup",msg:"Please use sup option in @vuepress/plugin-markdown-stylize instead."}),e({options:n,old:"stylize",msg:"Please use custom option in @vuepress/plugin-markdown-stylize instead."}),n.card&&P.error(`${S.magenta("card")} is deprecated, please import  ${S.magenta("VPCard")} from "vuepress-plugin-components" and use it instead.`),e({options:n,old:"chart",msg:"Please use @vuepress/plugin-markdown-chart instead."}),e({options:n,old:"chartjs",msg:"Please use @vuepress/plugin-markdown-chart instead."}),e({options:n,old:"echarts",msg:"Please use @vuepress/plugin-markdown-chart instead."}),e({options:n,old:"flowchart",msg:"Please use @vuepress/plugin-markdown-chart instead."}),e({options:n,old:"markmap",msg:"Please use @vuepress/plugin-markdown-chart instead."}),e({options:n,old:"mermaid",msg:"Please use @vuepress/plugin-markdown-chart instead."}),e({options:n,old:"plantuml",msg:"Please use @vuepress/plugin-markdown-chart instead."}),w(n.vuePlayground)&&(P.error(`Customizing @vue/repl with option ${S.magenta("vuePlayground")} is no longer supported, please import and use ${S.magenta("defineVuePlaygroundConfig")} from ${S.magenta("vuepress-plugin-md-enhance/client")} instead.`),n.vuePlayground=!0)},Re=n=>{n.use(E,{name:"demo",openRender:(e,t)=>{P.warn("demo container is deprecated, you should use normal-demo, react-demo and vue-demo container instead.");const{info:r}=e[t],s=/\[(.*)\]/u.exec(r),o=/^ demo\s*(?:\[.*?\])?\s*(.*)\s*$/u.exec(r);let a="";const i={};for(let p=t;p<e.length;p++){const{type:f,content:g,info:d}=e[p],y=d?/^([^ :[{]+)/.exec(n.utils.unescapeAll(d).trim())?.[1]??"text":"";if(f==="container_demo_close")break;g&&f==="fence"&&(y==="json"?a=h(g):i[y]=g)}return`
<CodeDemo id="code-demo-${t}" type="${s?.[1]??"normal"}"${o?` title="${encodeURIComponent(o[1])}"`:""}${a?` config="${a}"`:""} code="${h(JSON.stringify(i))}">
`},closeRender:()=>"</CodeDemo>"})},Ae=n=>{n.use(ge,{name:"md-demo",openRender:(e,t)=>(P.warn("md-demo container is deprecated, you should use preview container instead."),`<MdDemo title="${M(e[t].info)}" id="md-demo-${t}">
`),codeRender:(e,t,r,s,o)=>`<template #code>
${o.rules.fence(e,t,r,s,o)}</template>
`,contentOpenRender:()=>`<template #default>
`,contentCloseRender:()=>`</template>
`,closeRender:()=>`</MdDemo>
`})},Ee=(n,e,t,r=!1)=>{const s=new Set,o=new Set;return e.demo&&(s.add(`import CodeDemo from "${x}components/CodeDemo.js";`),o.add('app.component("CodeDemo", CodeDemo);'),r&&(s.add(`import MdDemo from "${x}components/MdDemo.js";`),o.add('app.component("MdDemo", MdDemo);'))),t.kotlinPlayground&&(s.add(`import KotlinPlayground from "${x}components/KotlinPlayground.js";`),o.add('app.component("KotlinPlayground", KotlinPlayground);')),e.playground&&(s.add(`import Playground from "${x}components/Playground.js";`),o.add('app.component("Playground", Playground);')),t.sandpack&&(s.add(`import SandPack from "${x}components/SandPack.js";`),o.add('app.component("SandPack", SandPack);')),t.vuePlayground&&(s.add(`import VuePlayground from "${x}components/VuePlayground.js";`),o.add('app.component("VuePlayground", VuePlayground);')),n.writeTemp("md-enhance/config.js",`${[...s.values()].join(`
`)}

export default {
  enhance: ({ app }) => {
${[...o.values()].flatMap(a=>a.split(`
`).map(i=>`    ${i}`)).join(`
`)}
  },
};
`)},Ue=(n={},e=!0)=>t=>{e&&De(n),t.env.isDebug&&P.info("Options:",n);const r=(o,a=[])=>!!n[o]&&a.every(i=>we(i,!!n[o])),s={kotlinPlayground:r("kotlinPlayground",["kotlin-playground"]),sandpack:r("sandpack",["sandpack-vue3"]),vuePlayground:r("vuePlayground",["@vue/repl"])};return pe(t,{id:"hope"}),{name:F,define:()=>({CODE_DEMO_OPTIONS:{...U,...w(n.demo)?n.demo:{}},VUE_PLAYGROUND_MONACO:w(n.vuePlayground)&&n.vuePlayground.editor==="monaco"}),extendsBundlerOptions:(o,a)=>{re(o,a,["@vuepress/helper","fflate","vuepress-shared"]),s.kotlinPlayground&&(O(o,a,"kotlin-playground"),ie(o,a,"kotlin-playground"),I(o,a,"kotlin-playground")),s.sandpack&&(O(o,a,"sandpack-vue3"),I(o,a,"sandpack-vue3")),s.vuePlayground&&(O(o,a,"@vue/repl"),I(o,a,"@vue/repl"),le(o,a,i=>{i.resolve.set("conditionNames",["browser","import","module"]),i.module.set("exprContextCritical",!1),i.module.set("unknownContextCritical",!1)}))},extendsMarkdown:o=>{if(n.demo&&(o.use(N),o.use(T),o.use(z),e&&(o.use(Re),o.use(Ae))),w(n.playground)){const{presets:a,config:i={}}=n.playground;a.forEach(p=>{p==="ts"?o.use($,G(i.ts??{})):p==="vue"?o.use($,K(i.vue??{})):p==="unocss"?o.use($,H(i.unocss??{})):w(p)&&o.use($,p)})}s.kotlinPlayground&&o.use(Y),s.vuePlayground&&o.use(Q),s.sandpack&&o.use(ne)},clientConfigFile:o=>Ee(o,n,s,e)}};export{U as CODE_DEMO_DEFAULT_SETTING,W as generateUnoURL,G as getTSPlaygroundPreset,V as getURL,H as getUnoPlaygroundPreset,K as getVuePlaygroundPreset,Y as kotlinPlayground,Ue as mdEnhancePlugin,N as normalDemo,$ as playground,z as reactDemo,ne as sandpack,T as vueDemo,Q as vuePlayground};
//# sourceMappingURL=index.js.map
